#import "../../fragments/calendar.graphql"

query CalendarsAndAppointmentsQuery($start: Float, $end: Float, $limit: Int) {
	getFolder(view: appointment, traverseMountpoints: true) {
		folders {
			linkedFolders {
				...calendarWithAppointmentFields
			}
			folders {
				...calendarWithAppointmentFields
			}
		}
	}
}

fragment calendarWithAppointmentFields on Folder {
	...calendarFields
	appointments(start: $start, end: $end, limit: $limit) {
		appointments {
			inviteId
			folderId
			modifiedSequence
			revision
			participationStatus
			date
			name
			freeBusy
			freeBusyActual
			duration
			alarm
			allDay
			timezoneOffset
			class
			isRecurring
			isOrganizer
			excerpt
			organizer {
				address
				sentBy
			}
			location
			instances {
				start
				utcRecurrenceId
				inviteId
				modifiedSequence
				revision
				participationStatus
				date
				name
				freeBusy
				freeBusyActual
				duration
				alarm
				allDay
				class
				location
				isException
				excerpt
			}
			draft
			neverSent
		}
	}
}
